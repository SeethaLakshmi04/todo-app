<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>Tasks</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>
<body class="bg-gray-100">
<div class="container mx-auto p-4">
    <h1 class="text-3xl mb-4">Your Tasks</h1>
    <a href="{% url 'task_create' %}" class="bg-blue-500 text-white px-4 py-2 rounded mb-4 inline-block">Add Task</a>
    <form class="mb-4">
        <label>
            <select name="category" class="p-2">
                <option value="">All Categories</option>
                <option value="WORK">Work</option>
                <option value="PERSONAL">Personal</option>
                <option value="OTHER">Other</option>
            </select>
        </label>
        <label>
            <select name="priority" class="p-2">
                <option value="">All Priorities</option>
                <option value="LOW">Low</option>
                <option value="MEDIUM">Medium</option>
                <option value="HIGH">High</option>
            </select>
        </label>
        <label>
            <select name="status" class="p-2">
                <option value="">All Statuses</option>
                <option value="PENDING">Pending</option>
                <option value="COMPLETED">Completed</option>
            </select>
        </label>
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Filter</button>
    </form>
    <ul id="task-list" class="space-y-4">
        {% for task in tasks %}
        <li class="bg-white p-4 rounded shadow flex justify-between items-center">
            <div>
                <h3 class="text-xl">{{ task.title }}</h3>
                <p>{{ task.description }}</p>
                <p>Due: {{ task.due_date }}</p>
                <p>Priority: {{ task.priority }}</p>
                <p>Category: {{ task.category }}</p>
                <p>Status: {{ task.status }}</p>
            </div>
            <div>
                <a href="{% url 'task_update' task.pk %}" class="text-blue-500">Edit</a>
                <a href="{% url 'task_delete' task.pk %}" class="text-red-500 ml-2">Delete</a>
                {% if task.status == 'PENDING' %}
                <a href="{% url 'task_complete' task.pk %}" class="text-green-500 ml-2">Complete</a>
                {% endif %}
            </div>
        </li>
        {% endfor %}
    </ul>
    <script>
        Sortable.create(document.getElementById('task-list'), { animation: 150 });
    </script>
</div>
</body>
</html>